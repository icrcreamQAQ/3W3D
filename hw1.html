
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title></title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="robots" content="noindex, nofollow">
  <meta name="googlebot" content="noindex, nofollow">
  <meta name="viewport" content="width=device-width, initial-scale=1">


  <script
    type="text/javascript"
    src="/js/lib/dummy.js"
    
  ></script>

    <link rel="stylesheet" type="text/css" href="/css/result-light.css">


  <style id="compiled-css" type="text/css">
    

    /* EOS */
  </style>

  <script id="insert"></script>

</head>
<body>
    <button id='power'>
Power
</button>
<button id='random'>
random
</button>

<p id='blinkMsg'></p>
 <div id="bkgd" style="position:absolute;  width:100vw; height: 100vh;background:gray">
   <img src ="https://i.imgur.com/8jOyVSM.png" style="position:absolute;width:100%; height: 100%;3;z-index:0";>
 </div>
  <script src="https://code.jquery.com/jquery-2.1.4.min.js">
</script>


    <script type="text/javascript">//<![CDATA[


var powerOn = true;
var random = false;
$('#power').click (function() {
  powerOn = !powerOn;
  
  if (powerOn === true) {  // false--> true
     lamps.forEach (function(item) {item.startBlink();});
  }
});
$('#random').click (function() {
  random = !random;
  
});

class Lamp {

  constructor(name) {
    this.name = name + Lamp.id++;
    this.myStatus = false;
    
    let el = document.createElement ('div');
    el.id = this.name;
    let text = document.createTextNode ('');
    el.appendChild(text);
    let bkgd = document.getElementById('bkgd');
    bkgd.appendChild(el);
    this.hue = Math.random()*360;

    // styles
    el.setAttribute ("style", `background-color: hsl(${this.hue}, 90%, 50%); width:30px;height:30px;border-radius:35px`);
    this.left = Math.random();
    while(this.left>0.7||this.left<0.3)this.left = Math.random();
    this.top = Math.random();
    while(this.top>0.7||this.top<0.3)this.top = Math.random();
    el.style.position = "absolute";
    el.style.left = this.left*100 + '%'; 
    el.style.top = this.top*100 + '%';
  }

  toggle() {
    this.myStatus = ! this.myStatus;
    
    if (powerOn) {
    	if (random===false)
       	setTimeout (()=>{this.toggle();}, 500);
      else
      	setTimeout (()=>{this.toggle();}, Math.random()*1000);
    }
    else
    	this.myStatus=false;
    
    if (this.myStatus === true) {
      $('#'+this.name).css('backgroundColor', `hsl(${this.hue},90%,80%)`);
      $('#'+this.name).text('');
    } else {
      $('#'+this.name).css('backgroundColor', `hsl(${this.hue},90%,24%)`);
      $('#'+this.name).text('');
    }
  }

  startBlink() {
    var that = this;
/*   
    setInterval(function() {
      that.toggle();
    }, 500);
*/
   setTimeout (()=>{ this.toggle(); },  Math.random()*500);
     
    //setInterval (that.toggle, 500);   // somehow, it does not work
  }
}


Lamp.id = 0; // class variable
lamps = [];

for (let i = 0; i < 15; i++) {
   let ll = new Lamp ('light');
   lamps.push (ll);
}

lamps.forEach ( function(ll) {ll.startBlink();} );





  //]]></script>

  <script>
    // tell the embed parent frame the height of the content
    if (window.parent && window.parent.parent){
      window.parent.parent.postMessage(["resultsFrame", {
        height: document.body.getBoundingClientRect().height,
        slug: "9sta3fL5"
      }], "*")
    }

    // always overwrite window.name, in case users try to set it manually
    window.name = "result"
  </script>


</body>
</html>
